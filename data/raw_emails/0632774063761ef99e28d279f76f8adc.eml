From: eleni@stanford.edu
To: j..sturm@enron.com, robert.benson@enron.com, doug.gilbert-smith@enron.com, 
Subject: MIME Attack Sample
Content-Type: text/plain;
	charset="Windows-1252"
Content-Transfer-Encoding: 7bit

Downloadable Software (DS) is a rapidly growing company with a high quality software. You've come to the right place if you need professionally implemented programming solutions for your usage. Thousands of satisfied customers have   already benefited from our soft and solutions. Hundreds are joining this community every day.
We deliver superior soft and services that empower our partners and   customers to dramatically improve their development, deployment, integration and   management of quality applications all over the world.VIEW ALL PRODUCTSMost popular OEM products:Microsoft Windows Vista Business
  Retail Price $299.00
  Our       $79.95Microsoft Office 2007 Enterprise 
  Retail Price $899.00
  Our       $79.95Macromedia Dreamweaver 8
  Retail Price $399.99
  Our       $49.95Adobe Creative Suite 2 Premium for Windows 
  Retail Price $1199.00
  Our       $149.95Microsoft Office 2003 Professional with Business Contact Manager for Outlook
  Retail Price $550.00
  Our       $69.95Adobe Illustrator CS2 
  Retail Price $499.00
  Our       $59.95 Adobe Premiere 2.0 
  Retail Price $849.00
  Our       $59.95 CorelDraw Graphics Suite X3
  Retail Price $399.00
  Our       $59.95 Macromedia Studio 8
  Retail Price  999.00
  Our        99.95 Autodesk AutoCAD 2007 
  Retail Price $3995.00
  Our       $129.95Intuit QuickBooks 2006 Premier Edition 
  Retail Price $399.95
  Our       $69.95 Avid Liquid Pro 7 
  Retail Price $999.00
  Our       $69.95Adobe Acrobat 8.0 Professional 
  Retail Price $449.00
  Our       $79.95Microsoft Money Home &amp; Business 7 
  Retail Price $89.90
  Our       $39.95 MS \/\/indo\/\/s XP Professional with SP2 
  Retail Price $269.99
  Our       $49.95Adobe Photoshop CS2 V 9.0 
  Retail Price $599.00
  Our       $69.95 Micrsoft Office XP Professional 
  Retail Price $499.00
  Our       $49.95VIEW ALL PRODUCTS


------=_NextPart_000_0006_01C799A4.2C0D1690
Content-Type: text/html;
	charset="Windows-1252"
Content-Transfer-Encoding: quoted-printable

<html xmlns:o=3D"urn:schemas-microsoft-com:office:office" xmlns:w=3D"urn:sc=
hemas-microsoft-com:office:word" xmlns=3D"http://www.w3.org/TR/REC-html40">

<head>
<META HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; charset=3DWindows-1252">
<meta name=3DGenerator content=3D"Microsoft Word 11 (filtered medium)">
</head>
<body>
<body>
<p><strong>Downloadable Software</strong> (DS) is a rapidly growing company=
 with a <strong>high quality software</strong>. You've come to the right pl=
ace if you need professionally implemented programming solutions for your u=
sage. Thousands of <strong>satisfied customers</strong> have   already bene=
fited from our soft and solutions. Hundreds are <strong>joining this commun=
ity</strong> every day.<br />
We deliver superior soft and services that empower our partners and   custo=
mers to dramatically improve their development, deployment, integration and=
   management of quality applications all over the world.</p>
<p><a href=3D"http://nemudnasdak.com/"><strong>VIEW ALL PRODUCTS</strong></=
a></p>
<p><strong>Most popular OEM products</strong>:</p>
<p><strong>Microsoft Windows Vista Business</strong><br>
  <em>Retail Price $299.00</em><br>
  <strong>Our       $79.95</strong></p>
<p><strong>Microsoft Office 2007 Enterprise</strong> <br>
  <em>Retail Price $899.00</em><br>
  <strong>Our       $79.95</strong></p>
<p><strong>Macromedia Dreamweaver 8</strong><br>
  <em>Retail Price $399.99</em><br>
  <strong>Our       $49.95</strong></p>
<p><strong>Adobe Creative Suite 2 Premium for Windows</strong> <br>
  <em>Retail Price $1199.00</em><br>
  <strong>Our       $149.95</strong></p>
<p><strong>Microsoft Office 2003 Professional with Business Contact Manager=
 for Outlook</strong><br>
  <em>Retail Price $550.00</em><br>
  <strong>Our       $69.95</strong></p>
<p><strong>Adobe Illustrator CS2 </strong><br>
  <em>Retail Price $499.00</em><br>
  <strong>Our       $59.95 </strong></p>
<p><strong>Adobe Premiere 2.0 </strong><br>
  <em>Retail Price $849.00</em><br>
  <strong>Our       $59.95 </strong></p>
<p><strong>CorelDraw Graphics Suite X3</strong><br>
  <em>Retail Price $399.00</em><br>
  <strong>Our       $59.95 </strong></p>
<p><strong>Macromedia Studio 8</strong><br>
  <em>Retail Price  999.00</em><br>
  <strong>Our        99.95 </strong></p>
<p><strong>Autodesk AutoCAD 2007 </strong><br>
  <em>Retail Price $3995.00</em><br>
  <strong>Our       $129.95</strong></p>
<p><strong>Intuit QuickBooks 2006 Premier Edition</strong> <br>
  <em>Retail Price $399.95</em><br>
  <strong>Our       $69.95 </strong></p>
<p><strong>Avid Liquid Pro 7 </strong><br>
  <em>Retail Price $999.00</em><br>
  <strong>Our       $69.95</strong></p>
<p><strong>Adobe Acrobat 8.0 Professional</strong> <br>
  <em>Retail Price $449.00</em><br>
  <strong>Our       $79.95</strong></p>
<p><strong>Microsoft Money Home &amp; Business 7 </strong><br>
  <em>Retail Price $89.90</em><br>
  <strong>Our       $39.95 </strong></p>
<p><strong>MS \/\/indo\/\/s XP Professional with SP2 </strong><br>
  <em>Retail Price $269.99</em><br>
  <strong>Our       $49.95</strong></p>
<p><strong>Adobe Photoshop CS2 V 9.0 </strong><br>
  <em>Retail Price $599.00</em><br>
  <strong>Our       $69.95 </strong></p>
<p><strong>Micr=EEsoft Office XP Professional </strong><br>
  <em>Retail Price $499.00</em><br>
  <strong>Our       $49.95</strong></p>
<p><a href=3D"http://nemudnasdak.com/"><strong>VIEW ALL PRODUCTS</strong></=
a></p>
</body>
</body>
</html>

------=_NextPart_000_0006_01C799A4.2C0D1690--

Content-Type: text/html
<div style="display: none;"><plaintext>
Content-Type: text/plain
BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

(sorry for the late reply)

Leopold Toetsch wrote:
> Am Sonntag, 20. Mai 2007 21:51 schrieb Bram Geron:
>> Bram Geron wrote:
>>> The patch in <parrot.solution1.patch> fixes the problem for me.
>> I realized that contexts currently initially have a ref_count of 0, if
>> they're not used as :outer targets for other subs. So in 'normal'
>> situations, the caller's context's ref_count now drops from 0 to -1 in a
>> tail call, and since -1 != 0 the caller's context will never be freed,
>> resulting in a memory leak. Attached <parrot.solution1.updated.patch>
>> should fix that.
>
> It's likely simpler to start all context refcounts equally with 1. This would
> probably reduce the current special refcount handling. But it would need some
> changes, which is easily greppable I presume.

The patch I attached should solve that. In a freshly created context,
the refcount is zero, and this increases it by one. I think incrementing
it is slightly better than directly assigning it a refcount of 1,
because that could cause bugs if we incremented the refcount before for
some mysterious reason. (far-fetched, I admit.)

With the patch, [perl #42790] "[BUG] Tailcall with slurpy argument
passing causes a memory leak" is solved for me too.

- --
Bram Geron | GPG 0xE7B9E65E
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.6 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFGanWHvquQbee55l4RApxAAJ9TAdA5Oc6vWpfhoCqLZPnD9+4rBwCeOg0T
4vgdP53aR0FQJ0iPjsKR8v4=
=NEBz
-----END PGP SIGNATURE-----

----