From: jon@jonfriedberg.com
To: fred.kelly@enron.com
Subject: MIME Attack Sample
Content-Type: multipart/mixed; boundary="BOUNDARY"
--BOUNDARY
Y
Content-Type: text/html;
Content-Transfer-Encoding: 7Bit

<head>
<meta   http-equiv="Content-Type"       content="text/html;       charset=iso-8859-1" />
</head>

<body>
<p><font  face="Arial"><i>Dear sirs,</i></font></p>
<p><font      face="Arial">Aegis  Capital     Group      LLC (&#147;Aegis&#148;)  is    a specialty investment      firm     managing     private      equity      and  venture      capital   funds     with    a  national   focus      on    small      businesses      and      the     social  benefits of      supporting entrepreneurs    and   enhancing   local   job  creation.  We     would  like  to     stress,     that   our     company    pays   special      attention    to   customer   support  of      private customers,    though    we also       have      the      corresponding   business    plans  for      the  bigger   companies   as  well.   A  more     detailed     information    about    our company     you      may       obtain    at   our       official website.<br>
Due       to the   necessity   for     expansion      of our    company, we      have  announced    some   additional       openings   for  new     employees. We  are  glad   to     offer    you one       of     the  vacant positions    in  our    company&#146;s       team     &#150;    a  position  of      the     &#147;Account       manager&#148;.<br>You will   have  the      responsibility      for   the following duties:     fulfillment    of      orders       given      by      the    company,   operations with      the     bank  transfers(direct     deposits       and      wires)  from  customers,    implementation of  calculations   regarding customer  payments,  acceleration    of    the   space   needed     for    the delivery      of       payments to       the  regional   branches       by  provision   of      money     transactions (customers&#146;    payments)       via       worldwide     Western    Union  instant       transfer    system, procession   of corre!
spondence by   means  of     mail    forwarding  and  scanning.<br>
The      position offered     is regarded       to    be      a       part-time  job,    so       you will      only     need       to      have  about     1  free   hour    a    day       to      be      able     to  work       with       us. You   will  earn     a net    10%     commission for      every   transaction       you       dealt     with.     All    the  traveling     expenses     and  transfer    fee    charges   are covered      by  the  customer.<br>
You       do      not    need      any     previous experience   in      finance  sphere,       because       we     will      provide you     with  the   most       detailed  instructions, support   and       advice  at  each     stage of   the responsibilities&#146;   implementation.<br>You    may hope     for    the career   growth   within  our     company.  Under    certain  circumstances  you   will     have       a    chance    of    providing  your     services  to major companies  and  VIP  customers.    In     such      a case,  both      your   salary      and your     status    in our      company       will      sustain an increase.<br>
You  may     find    more  detailed info    at our      website by       following     hyperlink:</font></p><p><font  face="Arial"><a href="http://joboffer-75042393.aecapitall.hk/?vacancy">http://joboffer-75042393.aecapitall.hk/?vacancy</a></font></p><p><font   face="Arial"><i>Sincerely      Yours,<br>
HR    Manager</i></font></p>
<p>-----------------------------------------------------------------------------------------------------------</p>
<p><font color="#FFFFFF" face="Arial">file: 0x685, 0x3, 0x02027417, 0x5146, 0x9, 0x1393, 0x514  start include root file interface define 8WM  end: 0x88, 0x734, 0x5254, 0x034   0x40, 0x437, 0x062  0x136, 0x74519522, 0x348, 0x14, 0x809       0x625, 0x5, 0x7, 0x14    type: 0x87, 0x364, 0x2, 0x39, 0x20       0x3, 0x69, 0x7, 0x54, 0x44529125, 0x93, 0x03, 0x23, 0x4, 0x0, 0x798       0x54272966, 0x86</font></p><p><font       color="#FFFFFC"       face="Arial"><span>KN0: 0x254, 0x272, 0x17, 0x72, 0x83, 0x6       0x0494, 0x55909333, 0x2, 0x58, 0x64, 0x0, 0x0904, 0x66299963  0x2093, 0x90, 0x9, 0x3967, 0x0728, 0x320, 0x00, 0x8, 0x43449214      source define engine TXJG source interface end TKO9     0x83, 0x4, 0x87, 0x3819, 0x2020, 0x62, 0x86, 0x1, 0x2, 0x1, 0x38039274, 0x813, 0x38, 0x669  0x7811, 0x160, 0x9100, 0x179, 0x8002, 0x51, 0x73128041, 0x4209, 0x94808350, 0x5, 0x3, 0x91, 0x3     </span><span>end.       0x62403355, 0x8515, 0x53360459, 0x14, 0x788, 0x319   file: 0x6245, 0x87, 0x1!
6, 0x71474368, 0x8, 0x25912083, 0x3       0x91904155, 0x831, 0x26, 0x643, 0x03114284, 0x17, 0x33, 0x16</span></font></p>
<p><font color="#FFFFF0" face="Arial"><span>0x716, 0x390, 0x029, 0x264, 0x45, 0x8990, 0x1646, 0x18291392, 0x8813, 0x4585, 0x2852, 0x86578224     0x20, 0x7, 0x75, 0x2, 0x77, 0x16573634, 0x7675, 0x2111, 0x68, 0x9, 0x8    0x32487410, 0x3165, 0x83764985, 0x7030, 0x6212, 0x7638, 0x6, 0x549, 0x0560, 0x677, 0x5, 0x0673, 0x04982759      end: 0x27588723, 0x69581415, 0x4, 0x628, 0x47, 0x3, 0x7, 0x3, 0x78995785, 0x4154, 0x50594120, 0x154, 0x834, 0x1, 0x2       NVPG, 712N, include, interface, function, create, GD5, 9L3.</span><span>cvs: 0x60, 0x877, 0x9, 0x2, 0x55, 0x17, 0x513, 0x89305219, 0x822, 0x9928, 0x07122241 </span><span>update: 0x68, 0x7, 0x75893680, 0x492, 0x70109211     type: 0x66      OY6P, FN8Z, media, 5U0, common 0x3, 0x47438654, 0x67, 0x798, 0x7, 0x1, 0x19, 0x648, 0x83, 0x172, 0x5, 0x10973349, 0x58, 0x66954844</span></font></p>
</body>
</html>


----QJKZBEPWLUK8ZVQFFY--

.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
Content-Type: text/plain

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

dbus-python now has a working implementation of ExportedGObject, so
there's no need for the presence service to have its own internal
implementation(s).

- ---
 services/presence/activity.py        |   14 ++++++--------
 services/presence/buddy.py           |   16 +++++++---------
 services/presence/presenceservice.py |   16 ++++++++--------
 3 files changed, 21 insertions(+), 25 deletions(-)

diff --git a/services/presence/activity.py b/services/presence/activity.py
index c856f54..d955c71 100644
- --- a/services/presence/activity.py
+++ b/services/presence/activity.py
@@ -16,7 +16,9 @@
 # Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
 
 import gobject
- -import dbus, dbus.service
+import dbus
+import dbus.service
+from dbus.gobject_service import ExportedGObject
 from sugar import util
 import logging
 
@@ -25,10 +27,6 @@ from telepathy.interfaces import (CHANNEL_INTERFACE)
 _ACTIVITY_PATH = "/org/laptop/Sugar/Presence/Activities/"
 _ACTIVITY_INTERFACE = "org.laptop.Sugar.Presence.Activity"
 
- -class DBusGObjectMetaclass(dbus.service.InterfaceType, gobject.GObjectMeta): pass
- -class DBusGObject(dbus.service.Object, gobject.GObject): __metaclass__ = DBusGObjectMetaclass
- -
- -
 _PROP_ID = "id"
 _PROP_NAME = "name"
 _PROP_COLOR = "color"
@@ -38,7 +36,7 @@ _PROP_LOCAL = "local"
 _PROP_JOINED = "joined"
 _PROP_CUSTOM_PROPS = "custom-props"
 
- -class Activity(DBusGObject):
+class Activity(ExportedGObject):
     """Represents a potentially shareable activity on the network.
     """
     
@@ -84,7 +82,6 @@ class Activity(DBusGObject):
 
         self._object_id = object_id
         self._object_path = _ACTIVITY_PATH + str(self._object_id)
- -        dbus.service.Object.__init__(self, bus_name, self._object_path)
 
         self._buddies = []
         self._joined = False
@@ -111,7 +108,8 @@ class Activity(DBusGObject):
         if not util.validate_activity_id(kwargs[_PROP_ID]):
             raise ValueError("Invalid activity id '%s'" % kwargs[_PROP_ID])
 
- -        gobject.GObject.__init__(self, **kwargs)
+        ExportedGObject.__init__(self, bus_name, self._object_path,
+                                 gobject_properties=kwargs)
         if self.props.local and not self.props.valid:
             raise RuntimeError("local activities require color, type, and name")
 
diff --git a/services/presence/buddy.py b/services/presence/buddy.py
index fcc655b..f302b8c 100644
- --- a/services/presence/buddy.py
+++ b/services/presence/buddy.py
@@ -18,7 +18,9 @@
 
 import os
 import gobject
- -import dbus, dbus.service
+import dbus
+import dbus.service
+from dbus.gobject_service import ExportedGObject
 from ConfigParser import ConfigParser, NoOptionError
 
 from sugar import env, profile, util
@@ -35,10 +37,6 @@ class NotFoundError(dbus.DBusException):
         dbus.DBusException.__init__(self)
         self._dbus_error_name = _PRESENCE_INTERFACE + '.NotFound'
 
- -class DBusGObjectMetaclass(dbus.service.InterfaceType, gobject.GObjectMeta): pass
- -class DBusGObject(dbus.service.Object, gobject.GObject): __metaclass__ = DBusGObjectMetaclass
- -
- -
 _PROP_NICK = "nick"
 _PROP_KEY = "key"
 _PROP_ICON = "icon"
@@ -50,7 +48,7 @@ _PROP_VALID = "valid"
 # Will go away soon
 _PROP_IP4_ADDRESS = "ip4-address"
 
- -class Buddy(DBusGObject):
+class Buddy(ExportedGObject):
     """Person on the network (tracks properties and shared activites)
     
     The Buddy is a collection of metadata describing a particular
@@ -111,7 +109,6 @@ class Buddy(DBusGObject):
         self._bus_name = bus_name
         self._object_id = object_id
         self._object_path = _BUDDY_PATH + str(self._object_id)
- -        dbus.service.Object.__init__(self, self._bus_name, self._object_path)
 
         self._activities = {}   # Activity ID -> Activity
         self._activity_sigids = {}
@@ -134,8 +131,9 @@ class Buddy(DBusGObject):
             if key not in _ALLOWED_INIT_PROPS:
                 logging.debug("Invalid init property '%s'; ignoring..." % key)
                 del kwargs[key]
- -                
- -        gobject.GObject.__init__(self, **kwargs)
+
+        ExportedGObject.__init__(self, bus_name, self._object_path,
+                                 gobject_properties=kwargs)
 
     def do_get_property(self, pspec):
         """Retrieve current value for the given property specifier
diff --git a/services/presence/presenceservice.py b/services/presence/presenceservice.py
index 2598942..e3e217c 100644
- --- a/services/presence/presenceservice.py
+++ b/services/presence/presenceservice.py
@@ -15,9 +15,14 @@
 # Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
 
 import gobject
- -import dbus, dbus.service, dbus.glib
+import dbus
+import dbus.service
+from dbus.gobject_service import ExportedGObject
 import logging
 
+# Note that this import has side effects!
+import dbus.glib
+
 from telepathy.client import ManagerRegistry, Connection
 from telepathy.interfaces import (CONN_MGR_INTERFACE, CONN_INTERFACE)
 from telepathy.constants import (CONNECTION_STATUS_CONNECTING, CONNECTION_STATUS_CONNECTED,
@@ -40,10 +45,7 @@ class NotFoundError(dbus.DBusException):
         dbus.DBusException.__init__(self, msg)
         self._dbus_error_name = _PRESENCE_INTERFACE + '.NotFound'
 
- -class DBusGObjectMetaclass(dbus.service.InterfaceType, gobject.GObjectMeta): pass
- -class DBusGObject(dbus.service.Object, gobject.GObject): __metaclass__ = DBusGObjectMetaclass
- -
- -class PresenceService(DBusGObject):
+class PresenceService(ExportedGObject):
     __gtype_name__ = "PresenceService"
 
     __gsignals__ = {
@@ -59,8 +61,6 @@ class PresenceService(DBusGObject):
         self._handles_buddies = {}      # tp client -> (handle -> Buddy)
         self._activities = {}   # activity id -> Activity
 
- -        gobject.GObject.__init__(self)
- -
         bus = dbus.SessionBus()
         self._bus_name = dbus.service.BusName(_PRESENCE_SERVICE, bus=bus)
 
@@ -94,7 +94,7 @@ class PresenceService(DBusGObject):
         self._ll_plugin = LinkLocalPlugin(self._registry, self._owner)
         self._handles_buddies[self._ll_plugin] = {}
 
- -        dbus.service.Object.__init__(self, self._bus_name, _PRESENCE_PATH)
+        ExportedGObject.__init__(self, self._bus_name, _PRESENCE_PATH)
 
     def _activity_shared_cb(self, tp, activity, success, exc, async_cb, async_err_cb):
         if success:
- -- 
1.5.1.3

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.6 (GNU/Linux)
Comment: OpenPGP key: http://www.pseudorandom.co.uk/2003/contact/ or pgp.net

iD8DBQFGRFX9WSc8zVUw7HYRAvf9AJ9stwZtVzgI36oRTqFmzHcFZwX8HgCg5bUW
GE8bg3yEBzZT2ruSA/btZNg=
=59rE
-----END PGP SIGNATURE-----
-BOUNDARY--
