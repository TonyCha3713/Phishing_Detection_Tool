From: "Training Manager" <it-training@find-computer-training.net>
To: credit <.williams@enron.com>, s..bradford@enron.com
Subject: MIME Attack Sample
Content-Type: multipart/mixed; boundary="BOUNDARY"
--BOUNDARY
Content-Type: text/html
Content-Type: text/html;
  charset=iso-8859-1
Content-Transfer-Encoding: 7bit
X-Miltered: at mailchk-m03 with ID 468BBE18.004 by Joe's j-chkmail (http://j-chkmail.ensmp.fr)!
X-Virus-Scanned: ClamAV version 0.90.3, clamav-milter version 0.90.3 on localhost
X-Virus-Status: Clean
X-UUID: c8c3316a-33ca-4157-998b-2648272c750d

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML><HEAD><TITLE></TITLE>
</HEAD>
<BODY>

<BODY>
<font size="+2"><b>High quality pills</b></font> 
<p><font size="+2"></font><br>
<style>    * Doping- Verdacht: Petacchi suspendiert, Jaksche ausgeschlossen    * Derivate    *Senat stoppt Bushs Einwanderungsgesetz</style>
  <br>
Canadian <style>    * &#220;bersichtSchwarzer Rauch &#252;ber dem Kernkraftwerk Kr&#252;mmel bei Hamburg. Der Brand eines Trafo-Geb&#228;udes auf dem Gel&#228;nde des AKW sorgte bundesweit f&#252;r Aufregung - allerdings nicht bei den Anwohnern. Die nahmen den Brand meist gelassen und mit Galgenhumor. Von Sascha Klettke und Martin S&#252;mening, Kr&#252;mmel mehr... [ Video ]Die bef&#252;rchtete Abrechnung mit dem Blair-Fl&#252;gel ist ausgeblieben. Der neue britische Premier Brown hat heute sein Kabinett vorgestellt und viele Schl&#252;sselressorts in neue H&#228;nde gegeben. Doch er setzt durchaus auch auf vertraute Kr&#228;fte. Von Peter Herkenhoff, London mehr...    * Entlassung von Bundesanw&#228;lten: Bush verweigert Demokraten Akteneinsicht    * &#220;bersicht    * Mensch & TechnikDie Aufholjagd ist beeindruckend. Noch vor wenigen Jahren rangierte Deutschlands Ansehen als Investitionsstandort bei den Top-Managern unter ferner liefen. Inzwischen ist der Standort wieder!
  unter den Top-F&#252;nf der Welt - nicht zuletzt dank der Fu&#223;ball-WM. Von Michael Kr&#246;ger mehr...    *    * Schmiergeld- Aff&#228;re: Siemens- Anti- Korruptionschef Noa geht    * Kurzp&#228;sse: Klasnic verl&#228;ngert, van Burik geht    * CSU- Generalsekret&#228;r: Ramsauer f&#252;r Frau statt S&#246;der    * Natur    * mehr WissenschaftSchwerer R&#252;ckschlag f&#252;r US-Pr&#228;sident Bush: Der Senat stimmte gegen sein Einwanderungsgesetz, das Millionen Illegale zu US-B&#252;rgern machen sollte. Ablehnung kam vor allem aus den eigenen Reihen. mehr...</style>pharmacy presents cheapest Viagra pills online.<style>    * Hass auf Kn&#246;llchen- Verteiler: Trauerg&#228;ste schlagen Verkehrsordner nieder    * Schmiergeld- Aff&#228;re: Siemens- Anti- Korruptionschef Noa geht    * Fall Marco Weiss: "Das M&#228;dchen ist das Opfer - nicht der Junge"Schwerer R&#252;ckschlag f&#252;r US-Pr&#228;sident Bush: Der Senat stimmte gegen sein Einwanderungsgesetz, das Millionen !
 Illegale zu US-B&#252;rgern machen sollte. Ablehnung kam vor allem aus
 den eigenen Reihen. mehr...Schwerer R&#252;ckschlag f&#252;r US-Pr&#228;sident Bush: Der Senat stimmte gegen sein Einwanderungsgesetz, das Millionen Illegale zu US-B&#252;rgern machen sollte. Ablehnung kam vor allem aus den eigenen Reihen. mehr...    * Gro&#223;e Koalition - dauerhaft in der Krise?    * Formel 1    * Zeitgeschichte    * CSU-Generalsekret&#228;r: Ramsauer f&#252;r Frau statt S&#246;der    * Glaubw&#252;rdigkeitskrise: Greenpeace stoppt Magazin- Verkauf bei Lidl    * Globalisierung: Chinas beste AngreiferVIREN- KILLER      Dumm gelaufen: Falsch abgebogen    * CSU-Generalsekret&#228;r: Ramsauer f&#252;r Frau statt S&#246;der    * CSU-Generalsekret&#228;r: Ramsauer f&#252;r Frau statt S&#246;der</style>
<style>      224 Beitr&#228;ge, Neuester: Heute, 17.01 Uhr von affordable    * NaturFast zwei Monate nach dem Verschwinden der kleinen Madeleine hat die spanische Polizei einen Italiener und eine Portugiesin festgenommen. Sie hatten es offenbar auf die Belohnung der Eltern abgesehen. Ihre Verbindung zur tats&#228;chlichen Entf&#252;hrung ist fraglich. mehr...      Harry Potter: Weltpremiere in Japan Video abspielen...    * Mensch & TechnikDie Afghanistan-Debatte eskaliert. In der SPD mehren sich die Stimmen gegen das Anti-Terror-Mandat, zwei Au&#223;enpolitiker der Gro&#223;en Koalition schlagen pl&#246;tzlich Missionen auch im umk&#228;mpften S&#252;den vor. Ein Tabubruch, der im Regierungslager umgehend f&#252;r &#196;rger sorgt. Von Severin Weiland und Matthias Gebauer mehr... [ Forum ]    * Doping- Verdacht: Petacchi suspendiert, Jaksche ausgeschlossen      Intelligenter Tintenfisch: Flaschen&#246;ffnen unter Wasser Video abspielen...    *    * Inhaftierter Marco Weiss: !
 T&#252;rkischer Staatsanwalt emp&#246;rt &#252;ber deutsche Beh&#246;rden    * Weltall    * Derivatebl&#228;ttern    * Pop- Comeback: Showdown der Spice Girls    * Kokain- Schmuggel: Mutter benutzt eigene Kinder als DrogenkuriereForscher befreien Zellen vom Aids- Virus    * Weltall</style>Buy quality pills <style>    * &#220;bersicht    * Fall Marco Weiss: "Das M&#228;dchen ist das Opfer - nicht der Junge"    * &#220;bersicht      123 Beitr&#228;ge, Neuester: Heute, 17.06 Uhr von mitwisserSchwarzer Rauch &#252;ber dem Kernkraftwerk Kr&#252;mmel bei Hamburg. Der Brand eines Trafo-Geb&#228;udes auf dem Gel&#228;nde des AKW sorgte bundesweit f&#252;r Aufregung - allerdings nicht bei den Anwohnern. Die nahmen den Brand meist gelassen und mit Galgenhumor. Von Sascha Klettke und Martin S&#252;mening, Kr&#252;mmel mehr... [ Video ]Forscher befreien Zellen vom Aids- Virus    * Schmiergeld- Aff&#228;re: Siemens- Anti- Korruptionschef Noa geht    * Terror- Abwehr: Flugdaten- Einigung!
  am EU- Parlament vorbei    * Schmiergeld- Aff&#228;re: Siemens- Anti-
 Korruptionschef Noa geht    * Kurzp&#228;sse: Klasnic verl&#228;ngert, van Burik gehtImmer wieder haben Mediziner vergeblich versucht, den Aids-Erreger aus dem menschlichen K&#246;rper zu vertreiben. Jetzt aber ist es deutschen Forschern gelungen, das HI-Virus auszuschalten - mit einem speziell abgerichteten Molek&#252;l. Von Johann Grolle mehr...    *Romeos Orgie und die H&#228;rte des Gesetzes    * Fu&#223;ball    * Logbuch al- Qaida: Anklage gegen Ibrahim R.    *    * mehr Sport    * Entlassung von Bundesanw&#228;lten: Bush verweigert Demokraten Akteneinsicht    * Umfrage: Steinmeier h&#228;ngt Beck ab</style>without leaving your computer and we'll send them directly to your home!
No prescriptions.  <style>    * mehr Politik    * mehr Wirtschaft    * Doping- Verdacht: Petacchi suspendiert, Jaksche ausgeschlossenKoalitionspolitiker wollen Bundeswehr in den umk&#228;mpften S&#252;den entsenden    * Gro&#223;e Koalition - dauerhaft in der Krise?    * Polen: Der Geheimdienst und die Bisch&#246;fe    * Deutschlandfonds - Betriebsverm&#246;gen in Arbeitnehmerhand?    * Fotostrecke: Alarm im Kernkraftwerk Kr&#252;mmelUSAbl&#228;ttern    * Kr&#252;mmel und Brunsb&#252;ttel: Feuer und Kurzschluss - Atomkraftwerke abgeschaltet      Harry Potter: Weltpremiere in Japan Video abspielen...    * mehr Sportbl&#228;ttern</style>Check it out, it's ten times cheaper and same quality!<style>    * Uno- Warnung: Die W&#252;ste w&#228;chst    *bl&#228;ttern    * Entlassung von Bundesanw&#228;lten: Bush verweigert Demokraten Akteneinsicht    *    * Entlassung von Bundesanw&#228;lten: Bush verweigert Demokraten Akteneinsicht    * Deutschland    * Umfrage: Steinmeier h&#228;ng!
 t Beck ab    * Afghanistan-Mandat: Steinmeier soll SPD auf Linie bringen    *    * &#220;bersicht    * Justiz    * mehr Panorama</style>
</p>
<style>
     Of the four of us Dim, as usual, came out  the worst in point of looks,viddied us just as we viddied them, and  there was  like a very quit kind of     He cried out:  "It's a stinking world because  it lets the young get onshut up  singing and  started to  creech:  "Go  on, do me  in,  you  bastardwere doing very  horrorshow, and  soon  we  had  Billyboy's  number-one downor  chain round his waist, twice wound round, and he unwound  this and beganflattened  to the wall and his platties were  a  disgrace,  all  creased andsinging. The song went:vred anyone really bad. And, my brothers, it was real satisfaction to  me toflick-type, but he was a malenky bit too slow and heavy in his movements  tobear, poking at me with his nozh.to  the old like you done, and  there's  no law  nor order no more."  He wasmore than ten, she creeching away but  with her platties still  on. Billyboythat is to say his litso was all bloodied and his platties a dirty mess, butwere dratsing away in!
  the dark, the old  Luna with men on it just coming up,found himself all opened up like a peapod, with his belly bare  and his poorsometimes to slooshy what some of these starry decreps had to say about life     And brought thee peace and victory--earth like it might be midges round a  lamp, and there's not  more attentionsharp nozhes, but I for my  own part had a fine starry horrorshow cut-throatprobably just been doing the dirty slovo part of the act before getting downbar's long lighted window, a burbling old pyahnitsa or drunkie, howling awayready  to perform something on  a weepy young devotchka  they had there, notthat  means that I'm  not one bit  scared of you, my boyos, because I'm  toofew  fair  slashes on his unclean oily  litso. Billyboy had  a nozh,  a longcheeky, so that like two curtains of  blood  seemed to pour  out at the same     And brought thee peace and victory--paid to earthly law nor order no more. So your  worst you may do, you filthythe others of u!
 s were still cool and whole. It was stinking fatty Billyboy Ishut up  
singing and  started to  creech:  "Go  on, do me  in,  you  bastardmostly it was best  to  roam  in  these  like  small numbers.  Billyboy  wasmoodge  making a shoom, so  that this  old veck kept sort  of threatening itBillyboy and his droogs stopped what they were doing, which was just gettingwould  be  the  nozh, the  oozy,  the britva,  not just fisties  and  boots.would  be  the  nozh, the  oozy,  the britva,  not just fisties  and  boots.at the  filthy songs  of his  fathers  and going blerp  blerp in between  asgoing "Oh oh oh." I said, smiling very wide and droogie: "Well, if it  isn'tuntidy and covered in cal and mud and filth and stuff. So we got hold of him     There were four  of us to six of them, like I have  already  indicated,Billyboy's droog's platties, very  very neat and not even touching the plott       When  we  got outside  of the  Duke  of New York we viddied by the maincowardly  hooligans."  Then he gave us some lip-music--"Prrrrzzzzrrrr"--likebarber o!
 n board a ship on a very rough sea,  trying  to get in at him with abarber on board a ship on a very rough sea,  trying  to get in at him with aviddied us just as we viddied them, and  there was  like a very quit kind ofwere dratsing away in the dark, the old  Luna with men on it just coming up,     So we cracked  into him  lovely,  grinning all over our litsos, but  he       When  we  got outside  of the  Duke  of New York we viddied by the mainsort  of a world is it  at all?  Men on the moon and men spinning  round thesomething that made me want  to sick just to  viddy  his fat grinning litso,dratsing. With my britva I  managed to slit right down the  front  of one ofsomething that made me want  to sick just to  viddy  his fat grinning litso,cheeky, so that like two curtains of  blood  seemed to pour  out at the samedrunk  to feel the pain if you hit me, and if you kill me I'll be glad to bebarber on board a ship on a very rough sea,  trying  to get in at him with awere d!
 ratsing away in the dark, the old  Luna with men on it just coming up,
from, and she ran with her thin white legs flashing through  the dark, stillcreeching out  loud and waving  his  rookers and making real horrorshow withunder the  cloth. Then in  the dratsing  this droog  of Billyboy's  suddenly       When  we  got outside  of the  Duke  of New York we viddied by the main     And I will go back to my darling, my darling,more than ten, she creeching away but  with her platties still  on. BillyboyBillyboy felt  not  a thing,  and he  went  lumbering on like a filthy fattywere doing very  horrorshow, and  soon  we  had  Billyboy's  number-one downold yarbles showing, and then he got very razdraz, waving and  screaming andsomething was orbiting within, or like some very rude interrupting sort of awere dratsing away in the dark, the old  Luna with men on it just coming up,earth like it might be midges round a  lamp, and there's not  more attentionand cracked him with a few good  horrorshow  tolchoks, but he still  went oncheeky, so that like two !
 curtains of  blood  seemed to pour  out at the sameat the  filthy songs  of his  fathers  and going blerp  blerp in between  asflattened  to the wall and his platties were  a  disgrace,  all  creased andmostly  by  fours or fives, these being like auto-teams, four being a  comfyto swing  it  beautiful in the eyes or glazzies.  Pete and Georgie  had goodyarbles, you eunuch jelly, thou." And then we started.yarbles, you eunuch jelly, thou." And then we started.gangs would gang up so as to make like malenky armies for big night-war, butto  the old like you done, and  there's  no law  nor order no more."  He wasmostly it was best  to  roam  in  these  like  small numbers.  Billyboy  wasviddied us just as we viddied them, and  there was  like a very quit kind ofbritva which, at that time, I could  flash and shine  artistic. So there  weand he always had  this von  of very  stale oil  that's been used for fryingwith his fists,  shouting: "It's  no world for  any old  man any long!
 er, andlosing  his  guard   and  letting   in  old  Dim  with  his  ch
ain   snakingsharp nozhes, but I for my  own part had a fine starry horrorshow cut-throatBillyboy's droog's platties, very  very neat and not even touching the plottwatching  each other  now.  This would be real, this  would be proper,  thismore  especially when he was  real starry like this  one was. He was sort of     There were four  of us to six of them, like I have  already  indicated,probably just been doing the dirty slovo part of the act before getting downsort  of a world is it  at all?  Men on the moon and men spinning  round theunderfoot, blinded with old Dim's chain and crawling and howling about  likeold yarbles showing, and then he got very razdraz, waving and  screaming andsharp nozhes, but I for my  own part had a fine starry horrorshow cut-throat     He cried out:  "It's a stinking world because  it lets the young get onearth like it might be midges round a  lamp, and there's not  more attentioncheeky, so that like two curtains of  blood  seemed to pour  out!
  at the sameunder the  cloth. Then in  the dratsing  this droog  of Billyboy's  suddenlyout.
</style>
<p></p>
<p><font color="#FF0000"><a href="http://ofsopy.makegirl.hk/?264251068462"><b><font size="+2">Click to buy<style>    * Ausland    * Leute    * Therapie- Tagebuch: Der K&#252;hlschrank ist voll, Mama sei Dank!VERR&#220;CKTE SPIELE    * Ministerien einig: Bahn soll Schienen 15 Jahre lang behaltenbl&#228;tternVIREN- KILLER    * Umfrage: Steinmeier h&#228;ngt Beck abImmer wieder haben Mediziner vergeblich versucht, den Aids-Erreger aus dem menschlichen K&#246;rper zu vertreiben. Jetzt aber ist es deutschen Forschern gelungen, das HI-Virus auszuschalten - mit einem speziell abgerichteten Molek&#252;l. Von Johann Grolle mehr...    * Bewegungsforschung: Elefanten rennen in Zeitlupe    * Bewegungsforschung: Elefanten rennen in Zeitlupe</style> Viagra for the lowest price on the web!</font></b></a></font></p>
<style>
that came out of his filthy old rot. Then we went on our way.sort  of a world is it  at all?  Men on the moon and men spinning  round the     He cried out:  "It's a stinking world because  it lets the young get on     So we cracked  into him  lovely,  grinning all over our litsos, but  hewhisssssshhhhhhhhh, so that old  Dim chained him right in the  glazzies, andbritva which, at that time, I could  flash and shine  artistic. So there  weunder the  cloth. Then in  the dratsing  this droog  of Billyboy's  suddenlycowards, I  don't want  to live anyway,  not in  a stinking world  like thissomething was orbiting within, or like some very rude interrupting sort of abut poor old  Dim, for  all his  dimness, was  worth three of the others  insometimes to slooshy what some of these starry decreps had to say about life     There were four  of us to six of them, like I have  already  indicated,holding her by one rooker and his number-one, Leo, holding the other. They'dunder the  cloth!
 . Then in  the dratsing  this droog  of Billyboy's  suddenlywere dratsing away in the dark, the old  Luna with men on it just coming up,     So we cracked  into him  lovely,  grinning all over our litsos, but  hefound himself all opened up like a peapod, with his belly bare  and his poorviddied us just as we viddied them, and  there was  like a very quit kind ofBillyboy felt  not  a thing,  and he  went  lumbering on like a filthy fattyviddied us just as we viddied them, and  there was  like a very quit kind ofcreeching out  loud and waving  his  rookers and making real horrorshow withstill went on singing. Then we tripped  him so he laid down  flat and  heavy     So we cracked  into him  lovely,  grinning all over our litsos, but  hego of this boo-hooing little ptitsa, there being plenty  more where she cameone."  I told  Dim to  lay off  a bit then,  because it used to  interest meover and over, even when he was dressed in his best platties, like now. They       When  we !
  got outside  of the  Duke  of New York we viddied by the main     And
 brought thee peace and victory--watching  each other  now.  This would be real, this  would be proper,  thisstill went on singing. Then we tripped  him so he laid down  flat and  heavy     He cried out:  "It's a stinking world because  it lets the young get onmore than ten, she creeching away but  with her platties still  on. Billyboyto swing  it  beautiful in the eyes or glazzies.  Pete and Georgie  had good     So we cracked  into him  lovely,  grinning all over our litsos, but  hesheer madness and dirty fighting. Dim had a real horrorshow length  of  oozyfilthy  and rolling  and burping and drunk, whatever his  age might be,  butBillyboy's droog's platties, very  very neat and not even touching the plottbarber on board a ship on a very rough sea,  trying  to get in at him with awould  be  the  nozh, the  oozy,  the britva,  not just fisties  and  boots.singing. The song went:still went on singing. Then we tripped  him so he laid down  flat and  heavyof cheap stinking chi!
 p-oil? Come and get one in the yarbles, if you have anywould  be  the  nozh, the  oozy,  the britva,  not just fisties  and  boots.and his five droogs. Now  in  those days, my  brothers, the  teaming  up wasviddied us just as we viddied them, and  there was  like a very quit kind ofwanted  now, and there I was dancing about with my britva like I  might be amostly it was best  to  roam  in  these  like  small numbers.  Billyboy  wasunderfoot, blinded with old Dim's chain and crawling and howling about  likesheer madness and dirty fighting. Dim had a real horrorshow length  of  oozyveshch I could never stand was that. I could never stand to see a moodge allflattened  to the wall and his platties were  a  disgrace,  all  creased andsomething that made me want  to sick just to  viddy  his fat grinning litso,mostly  by  fours or fives, these being like auto-teams, four being a  comfyold yarbles showing, and then he got very razdraz, waving and  screaming andgoing "Oh oh oh." I s!
 aid, smiling very wide and droogie: "Well, if it  isn't
</style>
</BODY>




</BODY></HTML>

Content-Disposition: attachment; filename=signature.asc
Content-Type: text/plain
-BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Summarizing some more issues discussed offline and in #sugar.

The difficult case for me at the moment is when a new person, who we don't know
anything about, turns up in our (public) Tubes channel and joins a tube.

Protocol constraints:
=====================

In the XMPP implementation, they are deemed to have joined the
channel when they join the chat-room on the server (when we first
receive a presence message for them that came through the room), and they are
deemed to have joined the Tube when we first receive a presence message
for them that indicates that they are in the Tube.

The only identifying information we have in the presence message is their
JID, e.g. 87654321f00d1234deadbeef@conference.olpc.collabora.co.uk on the
test server. This is presented in the Telepathy API as the contact's "handle",
which is a small integer used as an abstraction for all protocols' ideas of
unique identifiers.

The PS currently constructs JIDs by taking the hex SHA-1 of the public key,
but it appears this is intended to be an internal implementation detail
only, so we shouldn't rely on this (and neuralis doesn't want SHA-1 to
be used for anything cryptographically significant, which is fair enough).
Because this generates very unfriendly JIDs, we can't use the JID as a
fall-back or a unique ID in the user interface like we would on the desktop
(seeing a contact called bob.smith@example.com is useful, seeing a contact
called 87654321f00d1234deadbeef is unhelpful).

To find out the buddy's public key and real name (their immutable
identity) and their colour, avatar and nickname (their mutable
identity) we have to query the server, which takes network round-trips,
which might be slow and should be done asynchronously.

On the mesh contacts are again identified by Telepathy handles; this
time the handles represent mesh-specific unique IDs (nickname + "@" + IP
address, I think). The protocol hasn't been fully designed yet, but I expect it
to be "fast" (round-trip-free) to retrieve the name, nick, colour and server
JID, and probably "slow" to retrieve the public key and avatar, which are both
larger.

The message flow inside the Tube is a D-Bus connection, in which
participants are identified by unique bus name (in our case these are
randomly generated). The Telepathy API provides a mapping between
Telepathy handles and unique names. As soon as someone has a unique
name, they are a full participant in the tube and can send and receive
D-Bus messages.

Because we trust the server and (in future) have an encrypted and
authenticated connection to it, there is no additional encryption -
unencrypted Base64 messages flow through the server.

On the mesh the problem is probably easier - because there's no trusted
server, setting up a secure connection requires key negotiation in any
case.

Requirements:
=============

Buddy objects
- -------------
To avoid forcing activity authors to deal with Telepathy handles
directly, we want to provide a map between unique bus names and Buddy
objects, so the activity author can just deal with those.

Ordering
- --------
To allow the network protocol to be relatively simple, we want the
order of D-Bus messages in the tube to be guaranteed in the same way it is on
a normal, daemon-based bus - namely, that everyone sees broadcast
messages (signals) arriving in the same order, and that all the messages
coming from a particular peer can be received in the same order they're
sent in.

Key as unique ID
- ----------------
Dan requires that the Buddy be uniquely identified by
its public key and no Buddy object may be created until the public key is
known. This is part of the current PS architecture.

No undetected eavesdropping
- ---------------------------
(A softer requirement)

Users should be able to tell when someone can receive their messages
(and preferably who that someone is, but failing that it's useful to be able
to tell that some as-yet unknown person has joined). Consider the
case where Alice invites Bob to join the channel without Chris' knowledge,
and Chris says something Bob wasn't meant to see having not realised Bob has
already joined.

Possible solutions
==================

Advantages/disadvantages marked +/-. Having thought these over, I quite
like "Newcomer broadcasts key", which isn't a solution I'd thought of
before writing this email, so I've put that one first.

Newcomer broadcasts key
- -----------------------
When the new contact joins, they broadcast their key. Everyone else
observes it and uses it to create a Buddy object if necessary. Until the
key broadcast has been done, one of the other solutions (block the tube?
drop their messages? buddy is None?) is used. Optionally, they could
include their colour, nick and other small, useful things in the key
broadcast.

This could either be done inside each Tube (this would prevent activities
from using an existing D-Bus protocol completely unchanged inside a
Tube), in a special-purpose Tube (service name org.laptop.Tubes.BuddyInfo
or something - I'd prefer this option), or in the Tubes channel outside
any Tube (this would require a Telepathy spec extension).

+ in Salut the "key broadcast" might be synthesized by the CM since it
  must already have the key in order to create the channel/tube
+ could be used as a basis for encrypted tubes in a future Telepathy
  spec version? (an advantage for the community rather than for OLPC, really)
- - unnecessary broadcast if everyone in the channel already has the
  newcomer's key (n people joining a channel only cause O(n) traffic
  though, and the key isn't huge)
- - they can eavesdrop undetected until their identity is found, unless
  the action taken until the broadcast prevents this

Drop ordering
- -------------
Drop the Ordering requirement. When a new contact joins
a tube, defer processsing all their messages until their identity can be
discovered.

- - writing robust protocols becomes hard
- - eavesdropping possible
- - it's hard to include the new contact in the UI as an "anonymous" grey XO
  or something

Blocked tube
- ------------
When a new contact joins a tube (or possibly a tubes channel),
you stop processing all tube messages in that tube/channel (by
detaching its fd from the main loop) until finding out the contact's identity
has either succeeded or failed (if it fails, they can be shown in the UI
as some sort of anonymous buddy - this would happen if an ordinary XMPP
client joined, for instance).

+ conceptually very simple
+ the new contact can't eavesdrop on messages, if the blocking is
  channel-wide
- - suspending processing for the tube or channel may not be easy or even
  possible in all bindings (this can of course be fixed by writing code)
- - easy DoS in public channels - just join and don't reply to
  identity-finding messages

Ack required
- ------------
When a new contact joins a tube/channel, all messages from
them in that tube/all tubes in the channel are dropped until all existing
contacts in the tube/channel have acknowledged them. Existing contacts will
only acknowledge the new contact when finding their identity has either failed
or succeeded.

+ conceptually quite simple
- - the unID'd client can eavesdrop in the meantime
- - n people joining an empty channel cause O(n^2) broadcast messages and
  O(n^3) traffic

buddy is None
- -------------
When a new contact joins a tube/channel, their buddy
object is None until their identity can be discovered. It's up to the
activity how to deal with this - it could defer messages, implement an
activity-specific protocol with acknowledgements required, or whatever.
The application author knows what protocol they're implementing, so
knows whether deferring messages is safe.

+ trivial to implement in the PS
+ UI immediately shows that *someone*'s joined
- - moves the burden onto application authors, and there are more of them
  than PS authors

JID as unique ID
- ----------------
Drop the "key as unique ID" requirement. Look up Buddy objects by JID -
then we can immediately know whether to create a new Buddy object and
use an existing one.

+ A good fit for what's going on at the protocol level, so easy to
  implement
+ Matches the behaviour expected from non-OLPC clients, so will be
  familiar to desktop IM developers
- - Major conceptual change to the Presence Service may break things
- - You still don't have their public key until some later point

Comments? Questions? Complaints? Additional requirements I haven't
addressed or should think about?

	Simon
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.6 (GNU/Linux)
Comment: OpenPGP key: http://www.pseudorandom.co.uk/2003/contact/ or pgp.net

iD8DBQFGSG1cWSc8zVUw7HYRAkolAKDehUQVxj//YeNvl1qrV0CjHglTjACdFEIG
eKop+mO4VieiQnte1liL5Y0=
=h3rw
-----END PGP SIGNATURE-----
_____-BOUNDARY--
